<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demblee Report Saldi 2025 - V7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* Demblee Inspired Theme */
        body { font-family: 'Montserrat', sans-serif; background-color: #FFFFFF; color: #111111; }
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; }
        
        .bg-beige { background-color: #F5F5F0; }
        .bg-gold { background-color: #D4AF37; }
        .text-gold { color: #D4AF37; }
        .border-gold { border-color: #D4AF37; }
        
        .chart-container { position: relative; width: 100%; margin: 0 auto; }
        
        /* Interactive Cells */
        .matrix-cell { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .matrix-cell:hover { transform: translateY(-4px); box-shadow: 0 10px 30px -10px rgba(0,0,0,0.1); }
        .matrix-cell.active { background-color: #111111; color: #FFFFFF; border-color: #111111; }
        .matrix-cell.active .text-muted { color: #9CA3AF; }
        .matrix-cell.active .icon-gold { color: #D4AF37; }
        .matrix-cell.active .border-gray-200 { border-color: #333; }
        .matrix-cell.active .text-gray-400 { color: #9CA3AF; }
        
        .tracking-widest-custom { letter-spacing: 0.15em; }
    </style>
</head>
<body class="antialiased selection:bg-black selection:text-white">

    <!-- Header -->
    <header class="border-b border-gray-800 py-6 px-6 md:px-12 sticky top-0 bg-black backdrop-blur z-50 text-white shadow-md">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="text-center md:text-left mb-4 md:mb-0">
                <img src="https://demblee.com/cdn/shop/files/Logo_Demblee_wh.png?v=1726168886&width=120" alt="Demblee" class="h-auto w-32 mb-3 mx-auto md:mx-0">
                <h1 class="text-lg md:text-xl serif italic text-gray-300">Report Performance Saldi 2025</h1>
            </div>
            <div class="text-center md:text-right">
                <p class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-1">Periodo Analizzato</p>
                <p class="text-sm font-medium text-white">8 Gennaio ‚Äî 4 Marzo 2025</p>
            </div>
        </div>
    </header>

    <!-- Methodology -->
    <div class="bg-beige border-b border-gray-200 py-6 px-6">
        <div class="max-w-7xl mx-auto flex items-start gap-4">
            <div class="text-xl mt-0.5 text-gold">‚ö†Ô∏è</div>
            <div>
                <h3 class="font-bold text-xs uppercase tracking-widest mb-2 text-black">Nota Metodologica: Lordo Merce (GMV)</h3>
                <p class="text-sm text-gray-700 leading-relaxed max-w-4xl">
                    I dati presentati riflettono il <strong>Gross Merchandise Value (GMV)</strong>.
                    <br>Non sono stati sottratti i resi o gli sconti, per mostrare il reale volume di merce movimentata e l'intenzione di acquisto.
                </p>
            </div>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-6 md:px-12 py-12">

        <!-- KPI Dashboard -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20 border-b border-gray-100 pb-12">
            <div class="text-center md:text-left p-6 bg-white rounded-lg border border-gray-50 hover:shadow-lg transition-shadow duration-300">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3">Fatturato Lordo (GMV)</p>
                <p class="text-4xl lg:text-5xl serif mb-2 text-black">‚Ç¨ 66.219<span class="text-2xl text-gray-400">,85</span></p>
            </div>
            <div class="text-center md:text-left p-6 bg-white rounded-lg border border-gray-50 hover:shadow-lg transition-shadow duration-300 md:border-l border-gray-100 md:pl-8">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3">Volume Ordini</p>
                <p class="text-4xl lg:text-5xl serif mb-2 text-black">368</p>
                <p class="text-xs text-gray-500 mt-2">Scontrino Medio (AOV): <strong>‚Ç¨ 179,94</strong></p>
            </div>
            <div class="text-center md:text-left p-6 bg-white rounded-lg border border-gray-50 hover:shadow-lg transition-shadow duration-300 md:border-l border-gray-100 md:pl-8">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3">Incidenza Annuale</p>
                <p class="text-4xl lg:text-5xl serif mb-2 text-black">5,86%</p>
                <p class="text-xs text-gray-500 mt-2">Su un totale YTD di ‚Ç¨ 1.12M</p>
            </div>
        </section>

        <!-- Composition Section -->
        <section class="mb-24">
            <div class="flex flex-col md:flex-row justify-between items-end mb-10">
                <div class="max-w-2xl">
                    <h2 class="text-3xl serif italic mb-4 text-black">Composizione del Venduto</h2>
                    <p class="text-gray-600 font-light leading-relaxed">
                        Nonostante i saldi, il <span class="font-medium text-black border-b-2 border-gold">64% del valore</span> proviene da prodotti venduti a prezzo pieno (Best Seller).
                    </p>
                </div>
                <div class="flex space-x-2 mt-6 md:mt-0 bg-gray-100 p-1 rounded-lg">
                    <button onclick="updateDonut('value')" id="btn-val" class="px-6 py-2 text-xs font-bold uppercase tracking-widest border border-black bg-black text-white rounded-md shadow-sm transition-all">Valore (‚Ç¨)</button>
                    <button onclick="updateDonut('volume')" id="btn-vol" class="px-6 py-2 text-xs font-bold uppercase tracking-widest text-gray-500 hover:text-black transition-all">Volume (Pz)</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center bg-gray-50 rounded-xl p-8 shadow-sm">
                <div class="bg-white rounded-xl p-8 shadow-inner">
                    <div class="chart-container h-80 max-w-sm mx-auto">
                        <canvas id="compChart"></canvas>
                    </div>
                </div>
                <div class="space-y-8 pl-4">
                    <div class="group cursor-default border-l-4 border-black pl-4 py-2">
                        <div class="flex items-baseline justify-between mb-2">
                            <h3 class="text-sm font-bold uppercase tracking-widest text-black">Best Seller (Full Price)</h3>
                            <span class="serif text-xl font-bold">‚Ç¨ 42.213,66</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-1 font-medium">63,75% del Fatturato ‚Ä¢ 256 Pezzi</p>
                    </div>
                    <div class="group cursor-default border-l-4 border-gray-300 pl-4 py-2">
                        <div class="flex items-baseline justify-between mb-2">
                            <h3 class="text-sm font-bold uppercase tracking-widest text-gray-500">Prodotti in Saldo</h3>
                            <span class="serif text-xl text-gray-500">‚Ç¨ 24.006,19</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-1 font-medium">36,25% del Fatturato ‚Ä¢ 171 Pezzi</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Matrix Section -->
        <section class="mb-24">
            <h2 class="text-3xl serif italic mb-8 text-center text-black">Matrice Comportamentale</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12 font-light">
                Clicca sui quadranti per scoprire i 4 profili di acquisto (Incrocio Prodotti vs Sconti).
            </p>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <!-- Grid -->
                <div class="lg:col-span-7 grid grid-cols-2 gap-4">
                    <!-- Cluster 1 -->
                    <div onclick="selectCluster(1)" id="c1" class="matrix-cell active cursor-pointer border border-gray-200 bg-white p-6 md:p-8 flex flex-col justify-between min-h-[220px] rounded-lg shadow-sm">
                        <div class="flex justify-between items-start">
                            <span class="text-[10px] font-bold uppercase tracking-widest border border-current px-2 py-1 rounded bg-gray-100 text-black">Cluster 1</span>
                            <span class="serif text-3xl icon-gold">üíé</span>
                        </div>
                        <div>
                            <h3 class="serif text-xl mb-1 font-bold">Best Seller Puri</h3>
                            <p class="text-xs opacity-70 uppercase tracking-widest mb-3">Prezzo Pieno ‚Ä¢ No Coupon</p>
                            <p class="text-2xl md:text-3xl font-medium">‚Ç¨ 25.782</p>
                        </div>
                    </div>
                    <!-- Cluster 3 -->
                    <div onclick="selectCluster(3)" id="c3" class="matrix-cell cursor-pointer border border-gray-200 bg-white p-6 md:p-8 flex flex-col justify-between min-h-[220px] rounded-lg shadow-sm">
                        <div class="flex justify-between items-start">
                            <span class="text-[10px] font-bold uppercase tracking-widest border border-gray-200 text-gray-400 px-2 py-1 rounded">Cluster 3</span>
                            <span class="serif text-3xl opacity-50">‚úÇÔ∏è</span>
                        </div>
                        <div>
                            <h3 class="serif text-xl mb-1 font-bold">Best Seller + Coupon</h3>
                            <p class="text-xs text-gray-400 uppercase tracking-widest mb-3">Prezzo Pieno ‚Ä¢ Coupon Extra</p>
                            <p class="text-2xl md:text-3xl font-medium">‚Ç¨ 16.431</p>
                        </div>
                    </div>
                    <!-- Cluster 2 -->
                    <div onclick="selectCluster(2)" id="c2" class="matrix-cell cursor-pointer border border-gray-200 bg-white p-6 md:p-8 flex flex-col justify-between min-h-[220px] rounded-lg shadow-sm">
                        <div class="flex justify-between items-start">
                            <span class="text-[10px] font-bold uppercase tracking-widest border border-gray-200 text-gray-400 px-2 py-1 rounded">Cluster 2</span>
                            <span class="serif text-3xl opacity-50">üè∑Ô∏è</span>
                        </div>
                        <div>
                            <h3 class="serif text-xl mb-1 font-bold">Saldi Puri</h3>
                            <p class="text-xs text-gray-400 uppercase tracking-widest mb-3">Sconto 20% ‚Ä¢ No Coupon</p>
                            <p class="text-2xl md:text-3xl font-medium">‚Ç¨ 19.208</p>
                        </div>
                    </div>
                    <!-- Cluster 4 -->
                    <div onclick="selectCluster(4)" id="c4" class="matrix-cell cursor-pointer border border-gray-200 bg-white p-6 md:p-8 flex flex-col justify-between min-h-[220px] rounded-lg shadow-sm">
                        <div class="flex justify-between items-start">
                            <span class="text-[10px] font-bold uppercase tracking-widest border border-gray-200 text-gray-400 px-2 py-1 rounded">Cluster 4</span>
                            <span class="serif text-3xl opacity-50">üìâ</span>
                        </div>
                        <div>
                            <h3 class="serif text-xl mb-1 font-bold">Doppio Sconto</h3>
                            <p class="text-xs text-gray-400 uppercase tracking-widest mb-3">Sconto 20% ‚Ä¢ Coupon Extra</p>
                            <p class="text-2xl md:text-3xl font-medium">‚Ç¨ 4.798</p>
                        </div>
                    </div>
                </div>

                <!-- Info Panel -->
                <div class="lg:col-span-5 bg-black text-white p-10 flex flex-col justify-center rounded-xl shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gold rounded-full blur-3xl opacity-20 -mr-10 -mt-10"></div>
                    <div id="detail-content" class="relative z-10">
                        <h4 class="text-xs font-bold uppercase tracking-widest text-gold mb-4">Analisi Cluster</h4>
                        <h3 class="text-3xl serif italic mb-4" id="detail-title">Best Seller Puri</h3>
                        <p class="text-gray-300 leading-relaxed mb-8 text-sm" id="detail-desc">
                            Il <strong>Cliente Ideale</strong>. Acquista full price, niente sconti. Massima resa.
                        </p>
                        <div class="grid grid-cols-2 gap-6 border-t border-gray-800 pt-6">
                            <div>
                                <span class="text-xs text-gray-500 uppercase block mb-1">Incidenza Fatturato</span>
                                <span class="font-serif text-2xl text-white" id="detail-perc">39%</span>
                            </div>
                            <div>
                                <span class="text-xs text-gray-500 uppercase block mb-1">AOV (Medio)</span>
                                <span class="font-serif text-2xl text-gold" id="detail-aov">‚Ç¨ 186,63</span>
                            </div>
                        </div>
                        <div class="w-full bg-gray-800 h-1 mt-6 rounded-full overflow-hidden">
                            <div id="detail-bar" class="bg-gold h-1 transition-all duration-500" style="width: 39%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Coupon Section (VERTICAL CHART) -->
        <div class="max-w-4xl mx-auto mb-24">
            <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-2xl serif italic mb-2 text-black text-center">Top Coupon per Impatto</h2>
                <p class="text-sm text-gray-500 mb-8 text-center">Analisi del Fatturato Generato da ogni codice.</p>
                
                <div class="chart-container h-80">
                    <canvas id="couponChart"></canvas>
                </div>
                
                <div class="mt-6 p-4 bg-beige rounded-lg text-center">
                    <p class="text-xs text-gray-700 leading-relaxed">
                        Il grafico mostra il <strong>Totale Vendite (‚Ç¨)</strong> generato da ciascun codice. 
                        <strong>NEW10</strong> (Newsletter) √® il driver principale (‚Ç¨ 13.792).
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Text Analysis -->
        <section class="mb-24 bg-white p-8 md:p-12 rounded-xl shadow-lg border-t-4 border-gold">
            <h2 class="text-2xl serif italic mb-8 text-center text-black">Approfondimento Dati & Analisi Qualitativa</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 text-sm leading-relaxed text-gray-700">
                <div>
                    <h4 class="font-bold uppercase tracking-widest text-gold mb-3 text-xs">Analisi Basket Size & AOV</h4>
                    <p class="mb-4">
                        Un dato cruciale √® la <strong>staticit√† del carrello medio</strong>. 
                        Sia per i clienti "Full Price" (1.10 pezzi) che per quelli "Saldi" (1.07 pezzi), l'acquisto √® "monocapo".
                        Solo nei rari "Carrelli Misti" la media sale a <strong>2.16 pezzi</strong>.
                    </p>
                    <p class="bg-gray-50 p-4 rounded-lg border-l-2 border-gray-300 italic">
                        "L'utente entra con un obiettivo preciso (es. 'voglio quello stivale') e finalizza senza esplorare offerte collaterali."
                    </p>
                </div>
                <div>
                    <h4 class="font-bold uppercase tracking-widest text-gold mb-3 text-xs">Impatto "NEW10" vs Altri</h4>
                    <p class="mb-4">
                        Il codice <strong>NEW10</strong> ha generato ‚Ç¨ 13.792, ossia il <strong>65% del volume coupon</strong>. 
                        Gli influencer (ANTO10, etc.) hanno volumi marginali (< ‚Ç¨ 1.5k).
                    </p>
                    <p class="bg-gray-50 p-4 rounded-lg border-l-2 border-gray-300 italic">
                        "La leva principale extra-saldo √® organica (newsletter). Attenzione alla sovrapposizione tra NEW10 e Best Seller."
                    </p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-black text-white py-12 text-center relative z-10 mt-12">
        <div class="max-w-7xl mx-auto px-6">
            <p class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-4">Demblee Analytics Internal Report</p>
            <div class="w-10 h-1 bg-gold mx-auto mb-4"></div>
            <p class="text-[10px] text-gray-600">&copy; 2025 - Documento Riservato ad Uso Interno</p>
        </div>
    </footer>

    <!-- Logic -->
    <script>
        // Data
        const stats = {
            c1: { title: "Best Seller Puri", val: "‚Ç¨ 25.782", perc: 39, aov: "‚Ç¨ 186,63", desc: "Questo cluster rappresenta il <strong>Cliente Ideale</strong>. Acquista prodotti a prezzo pieno senza cercare sconti. Massima marginalit√†." },
            c2: { title: "Saldi Puri", val: "‚Ç¨ 19.208", perc: 29, aov: "‚Ç¨ 150,30", desc: "Clienti che hanno aderito alla promozione ufficiale (-20%) senza cumulare altri vantaggi." },
            c3: { title: "Best Seller + Coupon", val: "‚Ç¨ 16.431", perc: 25, aov: "‚Ç¨ 207,71", desc: "<strong>Fenomeno di Cannibalizzazione</strong>. Clienti che volevano il Best Seller ma hanno usato un codice (es. NEW10). Nota: AOV pi√π alto." },
            c4: { title: "Doppio Sconto", val: "‚Ç¨ 4.798", perc: 7, aov: "‚Ç¨ 161,82", desc: "Margine minimo. Cumulo sconto automatico 20% + codice extra. Rappresenta la quota minore." }
        };

        // Donut
        let donut;
        function initDonut() {
            const ctx = document.getElementById('compChart').getContext('2d');
            donut = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Full Price (Best Seller)', 'Prodotti in Saldo'],
                    datasets: [{
                        data: [42213.66, 24006.19],
                        backgroundColor: ['#111111', '#E5E7EB'],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '80%',
                    plugins: { legend: { display: false }, tooltip: { enabled: true } }
                }
            });
        }

        function updateDonut(mode) {
            const btnVal = document.getElementById('btn-val');
            const btnVol = document.getElementById('btn-vol');
            
            if(mode === 'value') {
                donut.data.datasets[0].data = [42213.66, 24006.19];
                btnVal.classList.replace('text-gray-500','text-white'); btnVal.classList.replace('bg-transparent','bg-black'); btnVal.classList.replace('border-gray-200','border-black');
                btnVol.classList.replace('text-black','text-gray-500'); btnVol.classList.replace('bg-black','bg-transparent');
            } else {
                donut.data.datasets[0].data = [256, 171];
                btnVol.classList.replace('text-gray-500','text-white'); btnVol.classList.replace('bg-transparent','bg-black'); btnVol.classList.replace('border-gray-200','border-black');
                btnVal.classList.replace('text-black','text-gray-500'); btnVal.classList.replace('bg-black','bg-transparent');
            }
            donut.update();
        }

        // Coupon Chart (VERTICAL + CORRECT AXIS)
        function initBar() {
            const ctx = document.getElementById('couponChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                // Removed indexAxis: 'y' to make it vertical
                data: {
                    labels: ['NEW10', 'ANTO10', 'FLASH15', 'FRANCIESP10', 'MARTINA10'],
                    datasets: [{
                        label: 'Fatturato (‚Ç¨)',
                        data: [13792, 1529, 1104, 912, 696],
                        backgroundColor: '#D4AF37',
                        barThickness: 40,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { 
                            display: true, 
                            grid: { display: true, drawBorder: false },
                            title: { display: true, text: 'Fatturato Generato (‚Ç¨)', font: { size: 10 } },
                            ticks: { 
                                // FIX: Use maximumFractionDigits: 0 to show whole numbers properly
                                callback: function(value) { 
                                    return new Intl.NumberFormat('it-IT', { style: 'currency', currency: 'EUR', maximumFractionDigits: 0 }).format(value); 
                                } 
                            }
                        },
                        x: { 
                            grid: { display: false },
                            ticks: { font: { family: 'Montserrat', size: 11, weight: '600' }, color: '#111' }
                        }
                    },
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Fatturato: ' + new Intl.NumberFormat('it-IT', { style: 'currency', currency: 'EUR' }).format(context.raw);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Interaction
        function selectCluster(id) {
            [1, 2, 3, 4].forEach(i => {
                const el = document.getElementById(`c${i}`);
                if (i === id) {
                    el.classList.add('active');
                    el.classList.remove('border-gray-200', 'bg-white');
                    // Style updates for active state
                    el.querySelector('span:first-child').classList.replace('bg-gray-100','bg-transparent');
                    el.querySelector('span:first-child').classList.replace('text-black','text-white');
                    el.querySelector('span:first-child').classList.add('border-white');
                    el.querySelector('h3').classList.add('text-white');
                    el.querySelector('p:nth-of-type(1)').classList.replace('text-gray-400','text-gray-300');
                    el.querySelector('.serif.text-3xl').classList.remove('opacity-50');
                } else {
                    el.classList.remove('active');
                    el.classList.add('border-gray-200', 'bg-white');
                    // Reset
                    el.querySelector('span:first-child').classList.replace('bg-transparent','bg-gray-100');
                    el.querySelector('span:first-child').classList.replace('text-white','text-black');
                    el.querySelector('span:first-child').classList.remove('border-white');
                    el.querySelector('h3').classList.remove('text-white');
                    el.querySelector('p:nth-of-type(1)').classList.replace('text-gray-300','text-gray-400');
                    if(i!==1) el.querySelector('.serif.text-3xl').classList.add('opacity-50');
                }
            });

            const data = stats[`c${id}`];
            document.getElementById('detail-title').innerText = data.title;
            document.getElementById('detail-desc').innerHTML = data.desc;
            document.getElementById('detail-perc').innerText = data.perc + '%';
            document.getElementById('detail-aov').innerText = data.aov;
            document.getElementById('detail-bar').style.width = data.perc + '%';
        }

        window.onload = function() {
            initDonut();
            initBar();
        };
    </script>
</body>
</html>
